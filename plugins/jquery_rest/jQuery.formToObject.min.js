/**
 * Serializes forms to objects in the same way PHP would do when given get/post data.
 * This is intended to be as close to the W3C standards as possible.
 * Reference: http://dev.w3.org/html5/spec/single-page.html#constructing-the-form-data-set
 *
 * @author Beanow
 * @company Tuxion
 * @email beanow@project-virality.com
 * @licence: MIT
 * @link: https://github.com/Tuxion/jQuery.formToObject
 */
(function(e){e.fn.formToObject=function(t){var n={},r=/\]\[|\[|\]/g,i=/^[0-9]+$/,t=t?t.toString():null;var s=function(t){if(e(t).is("[type=file]")){var n=e(t)[0].files,r=[];for(var i=0;i<n.length;i++){r.push({name:n[i].name,type:n[i].type,size:n[i].size})}return r}return e(t).val()};if(e(this).find(":input:enabled, :input[type=hidden]").eq(0).is("[type=text][name=isindex]")){return[e(this).find(":input:enabled").eq(0).val()]}e(this).find(":input:enabled, :input[type=hidden]").each(function(){var o=e(this);if(o.is("[type=button], [type=submit], [type=image]")&&(t?o.is(':not([name="'+t+'"])'):true))return true;if(o.is("[type=checkbox]:not(:checked), [type=radio]:not(:checked)"))return true;if(!o.attr("name")||o.attr("name")=="")return true;if(o.is("[type=hidden][name=_charset_]")){e.extend(n,{_charset_:document.characterSet?document.characterSet:document.charset});return true}var u=n,a=o.attr("name").split(r);if(a.length>1)a.pop();for(var f=0;f<a.length;f++){var l=a.length==f+1,c=f==0;if(a[f]==""){if(c)return true;var h=-1;for(var p in u){if(i.test(p)&&parseInt(p,10)>h)h=parseInt(p,10)}h++;u=u[h]=l?s(o):{}}else{u=u[a[f]]=l?s(o):u[a[f]]||{}}}});return n}})(jQuery)
